<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
    <title>Magro 4.24.18</title>

    <link rel="stylesheet" href="https://js.arcgis.com/4.7/esri/css/main.css">
    <script src="https://js.arcgis.com/4.7/"></script>

    <style>
        html,
        body,
        #viewDiv {
            padding: 0;
            margin: 0;
            height: 100%;
            width: 100%;
        }
    </style>

    <script>
        require([
            "esri/Map",
            "esri/views/MapView",
            "esri/layers/FeatureLayer",
            "esri/widgets/Legend",
            "dojo/domReady!"
        ],
          function(
            Map, MapView,
            FeatureLayer, Legend
          ) {

              var map = new Map({
                  basemap: "topo"
              });

              var view = new MapView({
                  container: "viewDiv",
                  map: map,

                  extent: {
                      xmin: -1.2631441076240186E7,
                      ymin: 3820427.905014247,
                      xmax: -1.2349953541655242E7,
                      ymax: 4050452.804745327,
                      spatialReference: 102100
                  }
              });

              view.when(function() {
                  var featureLayer = map.layers.getItemAt(0);

                  var legend = new Legend({
                      view:view,
                      layerInfos: [{
                          layer: featureLayer,
                          title: "Major Cities and Roads in Central Arizona"
                      }]
                  });
                  view.ui.add(legend, "bottom-right");
          });

        /********************
         * Add feature layer
         ********************/

        // Major roadways in AZ
        var featureLayer = new FeatureLayer({
            url: "https://services3.arcgis.com/0OPQIK59PJJqLK0A/arcgis/rest/services/All_Major_Highways/FeatureServer"
        });

        map.add(featureLayer);
        var featureLayer = new FeatureLayer({
            url: "https://services3.arcgis.com/0OPQIK59PJJqLK0A/ArcGIS/rest/services/Arizona_cities_Oct2016_in_SA/FeatureServer"
        });

        map.add(featureLayer);
        view.when(function () {
            var featureLayer = layers.getItemAt(0);

            var legend = new Legend({
                view: view,
                layerInfos: [{
                    layer: featureLayer,
                    title: "Major Cities and Roads in Central Arizona"
                }]
            });
            view.ui.add(legend, "bottom-right");
        })

      });
    </script>
</head>

<body>
    <div id="viewDiv"></div>
</body>

</html>